"use strict";(self.webpackChunkspa_task=self.webpackChunkspa_task||[]).push([[285],{966:(e,s,t)=>{t.d(s,{s:()=>n});var a=t(43);function n(e){const[s,t]=(0,a.useState)([]),[n,c]=(0,a.useState)(!1),[r,i]=(0,a.useState)(!1);return(0,a.useEffect)((()=>{i(!0),fetch("https://rickandmortyapi.com/api/character?page=".concat(e)).then((e=>e.json())).then((e=>{var s;t((s=>{const t=e.results.filter((e=>!s.some((s=>s.id===e.id))));return[...s,...t]})),c(null!==(null===(s=e.info)||void 0===s?void 0:s.next)),i(!1)})).catch((e=>console.error(e.message))).finally((()=>i(!1)))}),[e]),{characters:s,hasMore:n,loading:r}}},285:(e,s,t)=>{t.r(s),t.d(s,{Characters:()=>l});var a=t(43),n=t(733),c=t(966),r=t(141),i=t(579);function l(){const e=(0,a.useContext)(r.B),{qualityCh:s,setQualityCh:t}=e,l=(0,n.Zp)();(0,a.useEffect)((()=>{s>1&&t(1)}),[]);const{hasMore:o,loading:u,characters:h}=(0,c.s)(s),d=(0,a.useRef)(),m=(0,a.useCallback)((e=>{u||(d.current&&d.current.disconnect(),d.current=new IntersectionObserver((e=>{e[0].isIntersecting&&o&&t((e=>e+1))})),e&&d.current.observe(e))}),[u,o,t]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.sv,{}),(0,i.jsx)("h2",{className:"subtitle",children:"\u041f\u0435\u0440\u0441\u043e\u043d\u0430\u0436\u0438"}),(0,i.jsxs)("div",{className:"main_content",children:[(0,i.jsx)("ul",{className:"list heroes_list",children:h.map(((e,s)=>(0,i.jsxs)("li",{ref:h.length===s+1?m:null,onClick:()=>l("/characters/".concat(e.id),{state:e.id}),className:"list_item heroy_item",children:[(0,i.jsx)("img",{className:"img",src:e.image,alt:e.name}),(0,i.jsx)("p",{children:e.name})]},e.id)))}),u&&(0,i.jsx)("div",{className:"loading",children:"\u0418\u0434\u0435\u0442 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0430"})]})]})}}}]);
//# sourceMappingURL=285.b3f547d8.chunk.js.map